{"version":3,"sources":["turbopack:///[project]/src/libs/auth/auth.ts","turbopack:///[project]/src/app/[lang]/auth/login/page.tsx"],"sourcesContent":["const getBaseUrl = () => {\n  // Check if we're in production mode\n  if (process.env.NODE_ENV === \"production\") {\n    return \"/next-portfolio\";\n  }\n  return \"\";\n};\nexport async function login(\n  username: string,\n  password: string\n): Promise<boolean> {\n  try {\n    const res = await fetch(getBaseUrl() + \"/api/auth/login\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ username, password }),\n    });\n    return res.ok;\n  } catch (err) {\n    console.error(\"Login error:\", err);\n    return false;\n  }\n}\n\nexport async function logout(): Promise<boolean> {\n  try {\n    const res = await fetch(getBaseUrl() + \"/api/auth/logout\", {\n      method: \"POST\",\n    });\n    return res.ok;\n  } catch (err) {\n    console.error(\"Logout error:\", err);\n    return false;\n  }\n}\n\nexport async function isAuthenticated(): Promise<boolean> {\n  try {\n    const res = await fetch(getBaseUrl() + \"/api/auth/me\");\n    if (!res.ok) return false;\n    const json = await res.json();\n    return !!json.isLoggedIn;\n  } catch (err) {\n    console.error(\"isAuthenticated error:\", err);\n    return false;\n  }\n}\n","\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { useParams, useRouter } from \"next/navigation\";\nimport { useTranslation } from \"@/hooks/useTranslation\";\n\n// Functions\n\nimport { login } from \"@/libs/auth/auth\";\n\nexport default function LoginPage() {\n  // Hooks\n\n  const router = useRouter();\n  const params = useParams();\n  const { t } = useTranslation();\n\n  // States\n\n  const [username, setUsername] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [isLoading, setIsLoading] = useState(false);\n  const [isMobile, setIsMobile] = useState(false);\n\n  // Functions\n\n  useEffect(() => {\n    const checkDevice = () => setIsMobile(window.innerWidth < 1024);\n    checkDevice();\n    window.addEventListener(\"resize\", checkDevice);\n    return () => window.removeEventListener(\"resize\", checkDevice);\n  }, []);\n\nconst handleSubmit = async (e: React.FormEvent) => {\n  e.preventDefault();\n  if (!username || !password) {\n    setError(\"Please fill in all fields\");\n    return;\n  }\n  setIsLoading(true);\n  setError(\"\");\n\n  const ok = await login(username, password);\n  if (ok) {\n    router.push(`/${params.lang}/admin`);\n  } else {\n    setError(\"Invalid username or password\");\n  }\n  setIsLoading(false);\n};\n\n\n  return (\n    <>\n      <div className=\"min-h-screen select-none flex items-center justify-center bg-gradient-to-br from-indigo-50 via-purple-50 to-indigo-100 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 text-gray-800 dark:text-white transition-colors duration-500 px-2\">\n        <div className=\"flex w-full max-w-4xl h-[90vh] rounded-3xl overflow-hidden shadow-2xl border border-indigo-100 dark:border-gray-700 bg-white/90 dark:bg-gray-800/90 backdrop-blur-sm\">\n          {!isMobile && (\n            <div className=\"w-1/2 hidden lg:flex flex-col items-center justify-center bg-gradient-to-br from-indigo-500 via-purple-500 to-violet-600 p-6 text-white\">\n              <div className=\"text-center space-y-3\">\n                <h2 className=\"text-2xl font-bold\">{t(\"welcome_back\")}</h2>\n                <p className=\"text-sm opacity-90\">\n                  {t(\"description_auth_login\")}\n                </p>\n              </div>\n              <div className=\"mt-8\">\n                <svg\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                  className=\"w-24 h-24 opacity-90\"\n                  fill=\"none\"\n                  viewBox=\"0 0 24 24\"\n                  stroke=\"white\"\n                  strokeWidth=\"1.5\"\n                >\n                  <path\n                    strokeLinecap=\"round\"\n                    strokeLinejoin=\"round\"\n                    d=\"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-3 0A2.25 2.25 0 002.25 12v6.75A2.25 2.25 0 004.5 21h15a2.25 2.25 0 002.25-2.25V12a2.25 2.25 0 00-2.25-2.25h-15z\"\n                  />\n                </svg>\n              </div>\n            </div>\n          )}\n\n          <div className=\"flex flex-col justify-center items-center w-full lg:w-1/2 px-6 sm:px-8\">\n            <div className=\"w-full max-w-sm space-y-4\">\n              <div className=\"text-center\">\n                <div className=\"w-14 h-14 mx-auto mb-2 rounded-xl bg-gradient-to-br from-indigo-500 to-violet-600 flex items-center justify-center shadow-md\">\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-7 w-7 text-white\"\n                    viewBox=\"0 0 20 20\"\n                    fill=\"currentColor\"\n                  >\n                    <path\n                      fillRule=\"evenodd\"\n                      d=\"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z\"\n                      clipRule=\"evenodd\"\n                    />\n                  </svg>\n                </div>\n                <h1 className=\"text-xl font-bold bg-gradient-to-r from-indigo-500 to-violet-600 bg-clip-text text-transparent\">\n                  {t(\"admin_login\")}\n                </h1>\n                <p className=\"text-xs text-gray-600 dark:text-gray-400\">\n                  {t(\"login_to_continue\")}\n                </p>\n              </div>\n\n              <form onSubmit={handleSubmit} className=\"flex flex-col space-y-3\">\n                <div>\n                  <label className=\"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300\">\n                    {t(\"username\")}\n                  </label>\n                  <input\n                    type=\"text\"\n                    value={username}\n                    onChange={(e) => {\n                      setUsername(e.target.value);\n                      setError(\"\");\n                    }}\n                    className={`w-full px-3 py-2.5 rounded-lg border text-sm bg-white dark:bg-gray-700/50 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-white focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 ${\n                      error\n                        ? \"border-red-500 focus:ring-red-500 focus:border-red-500\"\n                        : \"\"\n                    }`}\n                    placeholder={t(\"enter_your_username\")}\n                    autoComplete=\"username\"\n                  />\n                </div>\n\n                <div>\n                  <label className=\"block text-xs font-medium mb-1 text-gray-700 dark:text-gray-300\">\n                    {t(\"password\")}\n                  </label>\n                  <input\n                    type=\"password\"\n                    value={password}\n                    onChange={(e) => {\n                      setPassword(e.target.value);\n                      setError(\"\");\n                    }}\n                    className={`w-full px-3 py-2.5 rounded-lg border text-sm bg-white dark:bg-gray-700/50 border-gray-300 dark:border-gray-600 text-gray-800 dark:text-white focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500 ${\n                      error\n                        ? \"border-red-500 focus:ring-red-500 focus:border-red-500\"\n                        : \"\"\n                    }`}\n                    placeholder={t(\"enter_your_password\")}\n                    autoComplete=\"current-password\" \n                  />\n                </div>\n\n                {error && (\n                  <div className=\"p-2 text-xs rounded-lg border bg-red-50 border-red-200 text-red-700 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300\">\n                    {error}\n                  </div>\n                )}\n\n                <button\n                  type=\"submit\"\n                  disabled={isLoading}\n                  className={`w-full py-2.5 rounded-lg font-semibold text-sm text-white transition-all duration-300 cursor-pointer ${\n                    isLoading\n                      ? \"bg-gray-400 cursor-not-allowed\"\n                      : \"bg-gradient-to-r from-indigo-500 to-violet-600 hover:from-indigo-600 hover:to-violet-700 active:scale-[0.98] shadow-md hover:shadow-lg\"\n                  }`}\n                >\n                  {isLoading ? t(\"logging_in\") : t(\"login\")}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":"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"}